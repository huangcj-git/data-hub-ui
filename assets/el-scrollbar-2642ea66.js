import{d as e,e as l}from"./useDesign-153c2279.js";import{m as a,u as t,v as s,T as r,n as o,i as n,o as i,q as u,w as c}from"./useI18n-58b225c6.js";import{t as v}from"./error-c58402b8.js";import{g as m,at as f,r as p,k as d,aH as h,b8 as y,l as g,m as w,w as b,b as S,y as z,v as x,u as k,z as _,x as E,c as T,I as L,j as H,n as B,p as j,a as R,o as C,G as N,q as X,aX as A,ac as M,d as W}from"./runtime-core.esm-bundler-9826e6ce.js";import{b as Y}from"./style-cacd911c.js";const $=Symbol("scrollbarContextKey"),q={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},I=a({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean});var K=o(m({__name:"thumb",props:I,setup(l){const a=l,o=f($),i=t("scrollbar");o||v("Thumb","can not inject scrollbar context");const u=p(),c=p(),m=p({}),E=p(!1);let T=!1,L=!1,H=n?document.onselectstart:null;const B=d((()=>q[a.vertical?"vertical":"horizontal"])),j=d((()=>(({move:e,size:l,bar:a})=>({[a.size]:l,transform:`translate${a.axis}(${e}%)`}))({size:a.size,move:a.move,bar:B.value}))),R=d((()=>u.value[B.value.offset]**2/o.wrapElement[B.value.scrollSize]/a.ratio/c.value[B.value.offset])),C=e=>{var l;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(l=window.getSelection())||l.removeAllRanges(),X(e);const a=e.currentTarget;a&&(m.value[B.value.axis]=a[B.value.offset]-(e[B.value.client]-a.getBoundingClientRect()[B.value.direction]))},N=e=>{if(!c.value||!u.value||!o.wrapElement)return;const l=100*(Math.abs(e.target.getBoundingClientRect()[B.value.direction]-e[B.value.client])-c.value[B.value.offset]/2)*R.value/u.value[B.value.offset];o.wrapElement[B.value.scroll]=l*o.wrapElement[B.value.scrollSize]/100},X=e=>{e.stopImmediatePropagation(),T=!0,document.addEventListener("mousemove",A),document.addEventListener("mouseup",M),H=document.onselectstart,document.onselectstart=()=>!1},A=e=>{if(!u.value||!c.value)return;if(!1===T)return;const l=m.value[B.value.axis];if(!l)return;const a=100*(-1*(u.value.getBoundingClientRect()[B.value.direction]-e[B.value.client])-(c.value[B.value.offset]-l))*R.value/u.value[B.value.offset];o.wrapElement[B.value.scroll]=a*o.wrapElement[B.value.scrollSize]/100},M=()=>{T=!1,m.value[B.value.axis]=0,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",M),W(),L&&(E.value=!1)};h((()=>{W(),document.removeEventListener("mouseup",M)}));const W=()=>{document.onselectstart!==H&&(document.onselectstart=H)};return e(y(o,"scrollbarElement"),"mousemove",(()=>{L=!1,E.value=!!a.size})),e(y(o,"scrollbarElement"),"mouseleave",(()=>{L=!0,E.value=T})),(e,l)=>(g(),w(r,{name:k(i).b("fade"),persisted:""},{default:b((()=>[S(z("div",{ref_key:"instance",ref:u,class:x([k(i).e("bar"),k(i).is(k(B).key)]),onMousedown:N},[z("div",{ref_key:"thumb",ref:c,class:x(k(i).e("thumb")),style:_(k(j)),onMousedown:C},null,38)],34),[[s,e.always||E.value]])])),_:1},8,["name"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);var O=o(m({__name:"bar",props:a({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),setup(e,{expose:l}){const a=e,t=p(0),s=p(0);return l({handleScroll:e=>{if(e){const l=e.offsetHeight-4,r=e.offsetWidth-4;s.value=100*e.scrollTop/l*a.ratioY,t.value=100*e.scrollLeft/r*a.ratioX}}}),(e,l)=>(g(),E(L,null,[T(K,{move:t.value,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),T(K,{move:s.value,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const P=a({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:i([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),D={scroll:({scrollTop:e,scrollLeft:l})=>[e,l].every(u)},G=m({name:"ElScrollbar"});const F=c(o(m({...G,props:P,emits:D,setup(a,{expose:s,emit:r}){const o=a,n=t("scrollbar");let i,c;const v=p(),m=p(),f=p(),h=p("0"),y=p("0"),S=p(),T=p(1),L=p(1),q=d((()=>{const e={};return o.height&&(e.height=Y(o.height)),o.maxHeight&&(e.maxHeight=Y(o.maxHeight)),[o.wrapStyle,e]})),I=d((()=>[o.wrapClass,n.e("wrap"),{[n.em("wrap","hidden-default")]:!o.native}])),K=d((()=>[n.e("view"),o.viewClass])),P=()=>{var e;m.value&&(null==(e=S.value)||e.handleScroll(m.value),r("scroll",{scrollTop:m.value.scrollTop,scrollLeft:m.value.scrollLeft}))};const D=()=>{if(!m.value)return;const e=m.value.offsetHeight-4,l=m.value.offsetWidth-4,a=e**2/m.value.scrollHeight,t=l**2/m.value.scrollWidth,s=Math.max(a,o.minSize),r=Math.max(t,o.minSize);T.value=a/(e-a)/(s/(e-s)),L.value=t/(l-t)/(r/(l-r)),y.value=s+4<e?`${s}px`:"",h.value=r+4<l?`${r}px`:""};return H((()=>o.noresize),(a=>{a?(null==i||i(),null==c||c()):(({stop:i}=l(f,D)),c=e("resize",D))}),{immediate:!0}),H((()=>[o.maxHeight,o.height]),(()=>{o.native||B((()=>{var e;D(),m.value&&(null==(e=S.value)||e.handleScroll(m.value))}))})),j($,R({scrollbarElement:v,wrapElement:m})),C((()=>{o.native||B((()=>{D()}))})),N((()=>D())),s({wrapRef:m,update:D,scrollTo:function(e,l){W(e)?m.value.scrollTo(e):u(e)&&u(l)&&m.value.scrollTo(e,l)},setScrollTop:e=>{u(e)&&(m.value.scrollTop=e)},setScrollLeft:e=>{u(e)&&(m.value.scrollLeft=e)},handleScroll:P}),(e,l)=>(g(),E("div",{ref_key:"scrollbarRef",ref:v,class:x(k(n).b())},[z("div",{ref_key:"wrapRef",ref:m,class:x(k(I)),style:_(k(q)),onScroll:P},[(g(),w(A(e.tag),{ref_key:"resizeRef",ref:f,class:x(k(K)),style:_(e.viewStyle)},{default:b((()=>[X(e.$slots,"default")])),_:3},8,["class","style"]))],38),e.native?M("v-if",!0):(g(),w(O,{key:0,ref_key:"barRef",ref:S,height:y.value,width:h.value,always:e.always,"ratio-x":L.value,"ratio-y":T.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]));export{q as B,F as E};
