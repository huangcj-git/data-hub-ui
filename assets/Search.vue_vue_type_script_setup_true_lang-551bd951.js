import{F as e}from"./Form-cb4d378d.js";import{p as o,d as t}from"./useI18n-58b225c6.js";import{E as s}from"./el-button-b3603e9b.js";import{u as n}from"./useForm-5e5b70fc.js";import{f as a}from"./index-faf5036a.js";import{c as i}from"./cloneDeep-7e4a742d.js";import{g as l,r,k as c,s as d,l as m,x as u,c as p,w as f,u as h,z as y,m as g,ac as x,I as b,ag as k,b5 as v}from"./runtime-core.esm-bundler-9826e6ce.js";const w={key:0},F=l({__name:"Search",props:{schema:{type:Array,default:()=>[]},isCol:o.bool.def(!1),labelWidth:o.oneOfType([String,Number]).def("auto"),layout:o.string.validate((e=>["inline","bottom"].includes(e))).def("inline"),buttomPosition:o.string.validate((e=>["left","center","right"].includes(e))).def("center"),showSearch:o.bool.def(!0),showReset:o.bool.def(!0),expand:o.bool.def(!1),expandField:o.string.def(""),inline:o.bool.def(!0),model:{type:Object,default:()=>({})}},emits:["search","reset"],setup(o,{emit:l}){const F=o,{t:_}=t(),j=r(!0),C=c((()=>{let e=i(F.schema);if(F.expand&&F.expandField&&!h(j)){const o=a(e,(e=>e.field===F.expandField));if(o>-1){const t=e.length;e.splice(o+1,t)}}return"inline"===F.layout&&(e=e.concat([{field:"action",formItemProps:{labelWidth:"0px"}}])),e})),{register:R,elFormRef:S,methods:I}=n({model:F.model||{}}),q=async()=>{var e;await(null==(e=h(S))?void 0:e.validate((async e=>{if(e){const{getFormData:e}=I,o=await e();l("search",o)}})))},D=async()=>{var e;null==(e=h(S))||e.resetFields();const{getFormData:o}=I,t=await o();l("reset",t)},P=c((()=>({textAlign:F.buttomPosition}))),W=()=>{var e;null==(e=h(S))||e.resetFields(),j.value=!h(j)};return(t,n)=>{const a=d("Icon");return m(),u(b,null,[p(h(e),{"is-custom":!1,"label-width":o.labelWidth,"hide-required-asterisk":"",inline:o.inline,"is-col":o.isCol,schema:h(C),onRegister:h(R)},{action:f((()=>["inline"===o.layout?(m(),u("div",w,[o.showSearch?(m(),g(h(s),{key:0,type:"primary",onClick:q},{default:f((()=>[p(a,{icon:"ep:search",class:"mr-5px"}),k(" "+v(h(_)("common.query")),1)])),_:1})):x("",!0),o.showReset?(m(),g(h(s),{key:1,onClick:D},{default:f((()=>[p(a,{icon:"ep:refresh-right",class:"mr-5px"}),k(" "+v(h(_)("common.reset")),1)])),_:1})):x("",!0),o.expand?(m(),g(h(s),{key:2,text:"",onClick:W},{default:f((()=>[k(v(h(_)(j.value?"common.shrink":"common.expand"))+" ",1),p(a,{icon:j.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):x("",!0)])):x("",!0)])),_:1},8,["label-width","inline","is-col","schema","onRegister"]),"bottom"===o.layout?(m(),u("div",{key:0,style:y(h(P))},[o.showSearch?(m(),g(h(s),{key:0,type:"primary",onClick:q},{default:f((()=>[p(a,{icon:"ep:search",class:"mr-5px"}),k(" "+v(h(_)("common.query")),1)])),_:1})):x("",!0),o.showReset?(m(),g(h(s),{key:1,onClick:D},{default:f((()=>[p(a,{icon:"ep:refresh-right",class:"mr-5px"}),k(" "+v(h(_)("common.reset")),1)])),_:1})):x("",!0),o.expand?(m(),g(h(s),{key:2,text:"",onClick:W},{default:f((()=>[k(v(h(_)(j.value?"common.shrink":"common.expand"))+" ",1),p(a,{icon:j.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):x("",!0)],4)):x("",!0)],64)}}});export{F as _};
