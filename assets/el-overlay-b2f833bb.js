import{b as e,h as t,g as o,a as s,r as n}from"./style-af36378f.js";import{o as a,bg as u,aH as l,e as r,br as d,j as m,aN as c,bn as i,g as v,c as p,q as f,h as y}from"./runtime-core.esm-bundler-9826e6ce.js";import{u as b,i as h,m as g,o as M}from"./useI18n-d79c1d65.js";import{t as E}from"./error-c58402b8.js";import{g as x}from"./scroll-d46e7ac5.js";import{P as k}from"./vnode-b96dd110.js";const w=(t,o,s)=>{let n={offsetX:0,offsetY:0};const r=o=>{const s=o.clientX,a=o.clientY,{offsetX:u,offsetY:l}=n,r=t.value.getBoundingClientRect(),d=r.left,m=r.top,c=r.width,i=r.height,v=document.documentElement.clientWidth,p=document.documentElement.clientHeight,f=-d+u,y=-m+l,b=v-d-c+u,h=p-m-i+l,g=o=>{const r=Math.min(Math.max(u+o.clientX-s,f),b),d=Math.min(Math.max(l+o.clientY-a,y),h);n={offsetX:r,offsetY:d},t.value.style.transform=`translate(${e(r)}, ${e(d)})`},M=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",M)},d=()=>{o.value&&t.value&&o.value.removeEventListener("mousedown",r)};a((()=>{u((()=>{s.value?o.value&&t.value&&o.value.addEventListener("mousedown",r):d()}))})),l((()=>{d()}))},C=e=>{r(e)||E("[useLockscreen]","You need to pass a ref param to this function");const a=b("popup"),u=d((()=>a.bm("parent","hidden")));if(!h||t(document.body,u.value))return;let l=0,i=!1,v="0";const p=()=>{setTimeout((()=>{n(document.body,u.value),i&&(document.body.style.width=v)}),200)};m(e,(e=>{if(!e)return void p();i=!t(document.body,u.value),i&&(v=document.body.style.width),l=x(a.namespace.value);const n=document.documentElement.clientHeight<document.body.scrollHeight,r=o(document.body,"overflowY");l>0&&(n||"scroll"===r)&&i&&(document.body.style.width=`calc(100% - ${l}px)`),s(document.body,u.value)})),c((()=>p()))},L=e=>{if(!e)return{onClick:i,onMousedown:i,onMouseup:i};let t=!1,o=!1;return{onClick:s=>{t&&o&&e(s),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}};const j=v({name:"ElOverlay",props:g({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:M([String,Array,Object])},zIndex:{type:M([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const s=b("overlay"),{onClick:n,onMousedown:a,onMouseup:u}=L(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?p("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:n,onMousedown:a,onMouseup:u},[f(t,"default")],k.STYLE|k.CLASS|k.PROPS,["onClick","onMouseup","onMousedown"]):y("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[f(t,"default")])}});export{j as E,C as a,L as b,w as u};
