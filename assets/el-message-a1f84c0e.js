import{m as e,u as s,q as t,v as n,T as a,n as o,w as l,o as r,N as u,i as p,O as i,z as d,P as c,Q as m,R as f}from"./useI18n-58b225c6.js";import{u as g,i as y,T as v,E as b,a as x}from"./index-613eaa2d.js";import{g as C,k as h,l as N,x as k,q as T,c as j,w as B,b as w,y as z,v as I,u as S,b5 as _,j as $,a$ as E,r as L,o as M,m as O,z as D,ac as H,aX as q,I as U,i as A,aA as F,C as R}from"./runtime-core.esm-bundler-9826e6ce.js";import{d as P,e as Q,E as X,u as Z}from"./useDesign-153c2279.js";import{m as G}from"./typescript-5028724d.js";const J=e({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),K=["textContent"],V=C({name:"ElBadge"});const W=l(o(C({...V,props:J,setup(e,{expose:o}){const l=e,r=s("badge"),u=h((()=>l.isDot?"":t(l.value)&&t(l.max)&&l.max<l.value?`${l.max}+`:`${l.value}`));return o({content:u}),(e,s)=>(N(),k("div",{class:I(S(r).b())},[T(e.$slots,"default"),j(a,{name:`${S(r).namespace.value}-zoom-in-center`,persisted:""},{default:B((()=>[w(z("sup",{class:I([S(r).e("content"),S(r).em("content",e.type),S(r).is("fixed",!!e.$slots.default),S(r).is("dot",e.isDot)]),textContent:_(S(u))},null,10,K),[[n,!e.hidden&&(S(u)||e.isDot)]])])),_:1},8,["name"])],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]])),Y={},ee=C({name:"ElConfigProvider",props:e({a11y:{type:Boolean,default:!0},locale:{type:r(Object)},size:g,button:{type:r(Object)},experimentalFeatures:{type:r(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:r(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),setup(e,{slots:s}){$((()=>e.message),(e=>{Object.assign(Y,null!=e?e:{})}),{immediate:!0,deep:!0});const t=u(e);return()=>T(s,"default",{config:null==t?void 0:t.value})}}),se=["success","info","warning","error"],te=G({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:p?document.body:void 0}),ne=e({customClass:{type:String,default:te.customClass},center:{type:Boolean,default:te.center},dangerouslyUseHTMLString:{type:Boolean,default:te.dangerouslyUseHTMLString},duration:{type:Number,default:te.duration},icon:{type:y,default:te.icon},id:{type:String,default:te.id},message:{type:r([String,Object,Function]),default:te.message},onClose:{type:r(Function),required:!1},showClose:{type:Boolean,default:te.showClose},type:{type:String,values:se,default:te.type},offset:{type:Number,default:te.offset},zIndex:{type:Number,default:te.zIndex},grouping:{type:Boolean,default:te.grouping},repeatNum:{type:Number,default:te.repeatNum}}),ae=E([]),oe=e=>{const{prev:s}=(e=>{const s=ae.findIndex((s=>s.id===e)),t=ae[s];let n;return s>0&&(n=ae[s-1]),{current:t,prev:n}})(e);return s?s.vm.exposed.bottom.value:0},le=["id"],re=["innerHTML"],ue=C({name:"ElMessage"});var pe=o(C({...ue,props:ne,emits:{destroy:()=>!0},setup(e,{expose:t}){const o=e,{Close:l}=x,r=s("message"),u=L(),p=L(!1),c=L(0);let m;const f=h((()=>o.type?"error"===o.type?"danger":o.type:"info")),g=h((()=>{const e=o.type;return{[r.bm("icon",e)]:e&&v[e]}})),y=h((()=>o.icon||v[o.type]||"")),C=h((()=>oe(o.id))),E=h((()=>o.offset+C.value)),A=h((()=>c.value+E.value)),F=h((()=>({top:`${E.value}px`,zIndex:o.zIndex})));function R(){0!==o.duration&&({stop:m}=d((()=>{G()}),o.duration))}function Z(){null==m||m()}function G(){p.value=!1}return M((()=>{R(),p.value=!0})),$((()=>o.repeatNum),(()=>{Z(),R()})),P(document,"keydown",(function({code:e}){e===X.esc&&G()})),Q(u,(()=>{c.value=u.value.getBoundingClientRect().height})),t({visible:p,bottom:A,close:G}),(e,s)=>(N(),O(a,{name:S(r).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:s[0]||(s[0]=s=>e.$emit("destroy")),persisted:""},{default:B((()=>[w(z("div",{id:e.id,ref_key:"messageRef",ref:u,class:I([S(r).b(),{[S(r).m(e.type)]:e.type&&!e.icon},S(r).is("center",e.center),S(r).is("closable",e.showClose),e.customClass]),style:D(S(F)),role:"alert",onMouseenter:Z,onMouseleave:R},[e.repeatNum>1?(N(),O(S(W),{key:0,value:e.repeatNum,type:S(f),class:I(S(r).e("badge"))},null,8,["value","type","class"])):H("v-if",!0),S(y)?(N(),O(S(b),{key:1,class:I([S(r).e("icon"),S(g)])},{default:B((()=>[(N(),O(q(S(y))))])),_:1},8,["class"])):H("v-if",!0),T(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(N(),k(U,{key:1},[H(" Caution here, message could've been compromised, never use user's input as message "),z("p",{class:I(S(r).e("content")),innerHTML:e.message},null,10,re)],2112)):(N(),k("p",{key:0,class:I(S(r).e("content"))},_(e.message),3))])),e.showClose?(N(),O(S(b),{key:2,class:I(S(r).e("closeBtn")),onClick:i(G,["stop"])},{default:B((()=>[j(S(l))])),_:1},8,["class","onClick"])):H("v-if",!0)],46,le),[[n,p.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let ie=1;const de=e=>{const s=!e||A(e)||F(e)||R(e)?{message:e}:e,t={...te,...s};if(t.appendTo){if(A(t.appendTo)){let e=document.querySelector(t.appendTo);c(e)||(e=document.body),t.appendTo=e}}else t.appendTo=document.body;return t},ce=({appendTo:e,...s},t)=>{const{nextZIndex:n}=Z(),a="message_"+ie++,o=s.onClose,l=document.createElement("div"),r={...s,zIndex:n()+s.zIndex,id:a,onClose:()=>{null==o||o(),(e=>{const s=ae.indexOf(e);if(-1===s)return;ae.splice(s,1);const{handler:t}=e;t.close()})(d)},onDestroy:()=>{m(null,l)}},u=j(pe,r,R(r.message)||F(r.message)?{default:R(r.message)?r.message:()=>r.message}:null);u.appContext=t||me._context,m(u,l),e.appendChild(l.firstElementChild);const p=u.component,i={close:()=>{p.exposed.visible.value=!1}},d={id:a,vnode:u,vm:p,handler:i,props:u.component.props};return d},me=(e={},s)=>{if(!p)return{close:()=>{}};if(t(Y.max)&&ae.length>=Y.max)return{close:()=>{}};const n=de(e);if(n.grouping&&ae.length){const e=ae.find((({vnode:e})=>{var s;return(null==(s=e.props)?void 0:s.message)===n.message}));if(e)return e.props.repeatNum+=1,e.props.type=n.type,e.handler}const a=ce(n,s);return ae.push(a),a.handler};se.forEach((e=>{me[e]=(s={},t)=>{const n=de(s);return me({...n,type:e},t)}})),me.closeAll=function(e){for(const s of ae)e&&e!==s.props.type||s.handler.close()},me._context=null;const fe=f(me,"$message");export{ee as C,fe as E};
